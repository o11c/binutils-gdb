another branch to start converting to c++

starting with -Wc++-compat, hopefully, and then full c++
